# เตรียมความพร้อม

สิ่งที่เราจะใช้ทั้งหมดสำหรับการเขียน LineBot จะมีดังนี้

1. Line Developer Account
   * สร้าง LineBot
2. Github repository
   * สร้าง repository
3. Heroku account
   * สร้าง App

## 1.Line Developer Account

ผมเดาเอาเองนะว่าคุณคงเป็นคนที่ใช้โปรแกรมไลน์ในทุกๆวันอยู่แล้ว เพราะงั้น account ปกติก็คงมี

1. เข้าไปที่ [https://developers.line.me/en/](https://developers.line.me/en/) แล้วคลิกปุ่ม Login  
   ![](/assets/2017-10-06_1251.png)

2. ใช้แอคเค้าของไลน์ล้อกอินเข้าสู่ระบบ  
   ![](/assets/2017-10-06_1253.png)

3. ไลน์จะให้ตัวเลขมาชุดหนึ่ง ซึ่งเราจะต้องเปิดโปรแกรมไลน์ที่โทรศัพท์มือถือเรา แล้วป้อนเลขนี้เข้าไป \(จะมีหน้าต่างขึ้นมาถามเองเมื่อเราเปิดไลน์\)  
   ![](/assets/2017-10-06_1254.png)

4. เมื่อล้อกอินสำเร็จเราจะเข้ามาหน้า LINE Developers console  
   ![](/assets/2017-10-06_1402.png)

## สร้าง LineBot

หลังจากเรามี Developer account แล้วเราก็จะมาสร้างตัว LineBot ในขั้นตอนนี้เราจะยังไม่ได้ให้ LineBot เชื่อมเข้ากับระบบที่เราจะเขียนด้วย PHP ยังก่อน เพราะว่าเรายังไม่มีโฮสต์เลย เราจะสร้างไว้รอการเชื่อมต่อ

การสร้าง LineBot นั้นตอนแรกเราต้องสร้าง Provider เสียก่อน มันเป็นแค่เหมือนตัวจัดกลุ่มบอทแหละ ไม่มีอะไรพิเศษ หลังสร้าง Provider แล้วจึงสร้างตัวบอทจริงๆ

1. คลิกปุ่ม Create provider  
   ![](/assets/2017-10-06_1447.png)

2. ป้อน Provider name \(ใช้ตัวอักษรตัวเล็กให้หมด\) จากนั้นคลิกปุ่ม Confirm  
   ![](/assets/2017-10-06_1448.png)

3. คลิกปุ่ม Create อีกทีเพื่อเป็นการยืนยัน  
   ![](/assets/2017-10-06_1449.png)

4. จากนั้นระบบจะพามายังหน้าป้อนรายละเอียด LineBot จากนั้นคลิกปุ่ม Confirm  
   -App name : ชื่อบอท ซึ่งชื่อนี้คนที่แอดบอทเราจะเห็น เพราะฉะนั้นตั้งให้หล่อๆ  
   -App description : คำอธิบายบอท ว่าบอทของเรานั้นเป็นบอทเกี่ยวกับอะไร และทำอะไรได้บ้าง  
   -Category : เลือกหมวดหมู่ว่าจะให้บอทนี้อยู่ในกลุ่มไหน  
   -Subcategory : เลือกหมวดหมู่ย่อยที่จะให้บอทอยู่ \(สองตัวเลือกนี้ ไลน์น่าจะกำหนดไว้เพื่อให้คนที่จะหาบอทมาเพื่อแอด หาได้ง่าย\)  
   -Email address : ป้อนอีเมล์  
   เสร็จแล้วคลิกปุ่ม Confirm  
   ![](/assets/2017-10-06_1451.jpg)

5. ติ๊กยอมรับเงื่อนไขการใช้งานและติ๊กยอมรับว่าเราได้อ่านเงื่อนไขแล้ว \(ทั้งที่จริงๆแล้วเราไม่ได้อ่าน\) จากนั้นคลิกปุ่ม Create  
   ![](/assets/2017-10-06_1452.jpg)

6. เป็นอันเรียบร้อย เราจะมี LineBot โผล่ขึ้นมา 1 ตัว บอทตอนนี้จะเป็นบอทที่ถามอะไรก็ตอบไม่ได้ เพราะว่าเรายังไม่ได้เขียน PHP ควบคุมมัน และถ้าหากดูที่ปุ่มจะเห็นเขียนว่า Configuration not yet complete  
   ![](/assets/2017-10-06_1453.jpg)

7. ถึงมันจะเป็นบอทที่ตอบอะไรไม่ได้ เราก็สามารถแอดเป็นเพื่อนได้แล้ว คลิกปุ่ม Configuration not yet complete  
   ![](/assets/2017-10-06_1455.png)

8. เลื่อนลงไปดูข้างล่างจะเห็น QR code เอาโทรศัพท์มาแอดบอทตัวนี้ทิ้งไว้ก่อนได้เลยครับ  
   ![](/assets/2017-10-06_1457.jpg)

## 2.Github repository

ในกรณีที่ท่านเป็นคนไม่เคยใช้ Github เลย ท่านก็อาจจะรู้สึกยุ่งยากนิดหน่อย แต่ไม่เป็นไร ผมจะพยายามพาท่านไปให้ถึงฝั่งให้ได้ แต่อย่างไรก็ตาม เรื่อง Git นี่เป็นเรื่องสำคัญและโปรแกรมเมอร์ส่วนใหญ่ก็ใช้ Git ในชีวิตประจำวันกันแล้ว ท่านจึงต้องหาความรู้เรื่อง Git มาประดับตัวโดยด่วน

ในตอนนี้ผมจะพาท่านไปสมัครแอคเค้า Github และแนะให้ท่านสร้าง repository

1. เข้าไปยังเว็บไซต์ [https://www.github.com](https://www.github.com) แล้วป้อนรายละเอียดในช่องสมัครสมาชิก แล้วกดปุ่ม Sign up for GitHub  
   -Username : ชื่อผู้เข้าใช้ระบบ  
   -Email : อีเมล์  
   -Password : รหัสผ่านที่ต้องการ  
   กดปุ่ม Sign up for GitHub

   ![](/assets/2017-10-06_1626.png)

2. หน้านี้ไม่ต้องเปลี่ยนแปลงอะไร คลิกปุ่ม Continue  
   ![](/assets/2017-10-06_1631.png)

3. ตอบแบบสอบถามเขาหน่อย ไม่ผิดไม่ถูกหรอก เลือกเอาอันที่ชอบ ไม่ใช่ข้อสอบ เสร็จแล้วคลิกปุ่ม Submit  
   -How would you describe your level of programming experience? เขาถามว่าประสบการณ์การเดฟของคุณมันประมาณไหน  
   ตอบไปเลย Very experienced ประสบการณ์พี่เยอะ  
   -What do you plan to use GitHub for? เขาถามว่า วางแผนจะเอา GitHub ไปทำอะไร  
   ตอบว่า Development จะเอาไปเขียนโค้ด  
   -Which is closest to how you would describe yourself? บอกซิคุณใกล้เคียงอันไหนสุด  
   ตอบเลย I'm professional พี่มันระดับโปร  
   เสร็จแล้วคลิกปุ่ม Submit

   ![](/assets/2017-10-06_1632.png)

4. คลิกปุ่ม Start a project  
   ![](/assets/2017-10-06_1633.png)

5. ทาง GitHub จะแจ้งมาว่าคุณยังไม่ได้ยืนยันอีเมล์เลย Please verify your email address  
   ![](/assets/2017-10-06_1634.png)

6. ไปที่อีเมล์ของคุณ น่าจะมีอีเมล์จาก GitHub ส่งไปหา 1 ฉบับให้เปิดแล้วคลิกลิ้งก์ที่เขาให้ไปเพื่อทำการยืนยันว่าอีเมล์นี้เป็นอีเมล์ของคุณจริงๆ หลังจากคลิกลิ้งก์ เราจะเข้าสู่หน้าในข้อ 7

7. ดูตรงคำว่า Your email was verified. นั่นหมายความว่าอีเมล์ของคุณได้รับการยืนยันแล้ว ให้ไปคลิกปุ่ม Start a project อีกครั้ง  
   ![](/assets/2017-10-06_1635.png)

8. หน้า Create a new repository ป้อน Repository name ว่า autobot \(จริงๆแล้วใช้ชื่ออะไรก็ได้ แต่อยากจะบังคับว่าใช้ชื่อนี้เถอะ เพราะเวลาอ่านหนังสือเล่มนี้มันจะได้ไม่งง \) เสร็จแล้วคลิกปุ่ม Create repository  
   ![](/assets/2017-10-06_1636.png)

9. เรียบร้อย เราได้ repository มา 1 ตัว  
   ![](/assets/2017-10-06_1637.png)

เราจะทิ้ง GitHub กับ repository ไว้ที่ตรงนี้ก่อน เราค่อยกลับมาจัดการกับมันอีกที เมื่อถึงเวลาของมัน

## 

## 3.Heroku Cloud Hosting

เนื่องจาก LINE เขาบังคับให้ระบบเราที่จะคุยกับ Bot API ของเขาจะต้องเป็น https:// เราเลยจำเป็นต้องใช้ Heroku เข้ามาช่วย หากสงสัยอะไรเพิ่มเติม กลับไปอ่าน Introduction ครับ ผมเขียนอธิบายไว้ในนั้นแล้ว

1. เข้าไปที่ https://www.heroku.com/ กดปุ่ม Signup หรืกดปุ่ม SIGN UP FOR FREE
   ![](/assets/2017-10-06_1722.png)

2. ป้อนรายละเอียดการสมัคร
   -First name : ชื่อ  
   -Last name : นามสกุล  
   -Email Address : อีเมล์  
   -Company name : ชื่อบริษัท \(ไม่มีก็ข้าม\)  
   -Country : เลือก Thailand  
   -Primary Development Language : เลือก PHP  
   -ติ๊กเครื่องหมายถูกหน้า I'm not a robot  
   คลิกปุ่ม CREATE FREE ACCOUNT

   ![](/assets/2017-10-06_1723.png)

3. ถ้าจำได้จากขั้นตอนก่อน จะเห็นว่าเราไม่ได้ป้อนรหัสผ่าน พอมาถึงหน้านี้เขาบอกว่าให้เราเข้าไปดูอีเมล์จะมีอีเมล์ยืนยันการสมัครสมาชิกส่งไป 1 ฉบับ
   ![](/assets/2017-10-06_1725.png)

4. เมื่อเปิดอีเมล์ที่ถูกส่งไปจาก Heroku แล้วคลิกลิ้งก์ข้างใน เราจะถูกนำมายังหน้านี้ ให้เราต้องรหัสผ่าน ป้อนรหัสผ่านเสร็จแล้วคลิกปุ่ม SET PASSWORD AND LOG IN
   ![](/assets/2017-10-06_1726.png)

5. คลิกปุ่ม CLICK HERE TO PROCESS
   ![](/assets/2017-10-06_1727.png)

6. คลิกปุ่ม Create New App เพื่อทำการสร้างโฮสต์ ตัว Heroku เองจะเรียกว่า App ผมสงสัยว่าคงจะเพื่อให้เข้าใจง่ายขึ้น แต่ไม่รู้สิ สำหรับผมแล้วเคยงงมาพักนึง ถ้าใช้คำว่า Create New Host ผมว่าผมเข้าใจง่ายกว่า
   ![](/assets/2017-10-06_1728.png)

7. หน้า Create New App ป้อน select2web-autobot เข้าไปในช่อง App name คำๆนี้จะถูกนำไปใช้ทำ subdomain ให้เรา เสร็จแล้วอย่างอื่นไม่ต้องเลือกอะไร คลิกปุ่ม Create app เลย
   ![](/assets/2017-10-06_1730.png)

8. ระบบจะพามาหน้านี้ ให้คลิกตรง Choose a pipeline แล้วคลิกปุ่ม Create new pipeline \(เรากำลังทำการเชื่อมต่อ Heroku เข้ากับ GitHub\)
   ![](/assets/2017-10-06_1731.png)

9. ช่อง Name the pipeline ป้อน select2web-autobot และช่อง Choose a stage to add this app to เลือกเป็น production เสร็จแล้วคลิกปุ่ม Create pipeline
   ![](/assets/2017-10-06_1731-2.png)

10. คลิกที่ select2web-autobot
    ![](/assets/2017-10-06_1733.png)  

11. คลิกแท็บ Deploy &gt; GitHub แล้วคลิกปุ่ม Connect to GitHub
    ![](/assets/2017-10-06_1735.png)

12. จะมีหน้าต่างเล็กๆแสดงขึ้นมา ให้เราป้อน Username/Password ล้อกอินเข้าสู่ GitHub เพื่อทำการ Authorize หรืออนุญาติให้ Heroku ดึงโค้ดออกจาก GitHub repository ของเราได้
    ![](/assets/2017-10-06_1736.png)

13. จะมีรายละเอียดบอกอีกครั้งว่า สองระบบนี้กำลังจะเชื่อมต่อกัน ให้เราคลิกปุ่ม Authorize heroku
    ![](/assets/2017-10-06_1737.png)

14. หลังจากรอสักครู่หน้าต่างเล็กๆจะปิดไป และหน้าที่เราอยู่จะแสดงให้เราเลือกว่าเราจะเชื่อม heroku app นี้เข้ากับ repository ตัวไหน
    ![](/assets/2017-10-06_1738.png)

15. ให้เราป้อนคำว่า autobot เข้าไปในช่อง ค้นหาแล้วกดปุ่ม Search เมื่อ repository ที่เราเคยทำไว้แสดงขึ้นมาด้านล่าง ให้คลิกปุ่ม Connect เพื่อทำการเชื่อมต่อ
    ![](/assets/2017-10-06_1739.png)

16. หลังการเชื่อมต่อ ให้สังเกตุว่าตรงปุ่ม GitHub จะมีคำเขียวๆเขียนว่า Connected พร้อมลูกศรเครื่องหมายถูก ทีนี้ให้เราคลิกปุ่ม Enable Automatic Deploys เพื่อเป็นการบอกให้ Heroku ไปดึงโค้ดจาก GitHub เอาขึ้น production ให้อัตโนมัติเมื่อเรา push โค้ดเข้าไปใน autobot repository
    ![](/assets/2017-10-06_1740.png)

17. จากนั้นให้เราคลิกแท็บ Settings แล้วคลิกปุ่ม Add buildpack กระบวนการที่กำลังจะทำนี้ทำเพื่อบอกกับ Heroku ว่า select2web-autobot นี้เราจะใช้ภาษา PHP เขียน  
    ![](/assets/2017-10-06_1843.png)

18. จะมีหน้าต่างเล็กๆ แสดงขึ้นมา เลือก PHP แล้วคลิกปุ่ม Save changes
    ![](/assets/2017-10-06_1844.png)

19. เมื่อแอดแล้ว Buildpacks จะแสดง heroku/php
    ![](/assets/2017-10-06_1845.png)

20. ทีนี้ให้เราคลิกที่ปุ่ม Open app ดู
    ![](/assets/2017-10-06_1741.png)

21. ที่เราทำ Heroku มาอย่างยาวนานก็เพียงเพื่อต้องการ URL นี่แหละ เราจะใช้ URL นี้เชื่อมต่อเข้ากับ LineBot ที่เราได้สร้างไว้ก่อนหน้านี้ ตอนนี้เรายังไม่ได้เขียนโค้ดใดๆ push ขึ้นไปยัง GitHub, Heroku จึงแสดงข้อความออกมาอย่างนี้
    ![](/assets/2017-10-06_1742.png)

xxx





